This chapter shows the results of the different techniques used in the level generation and the rule generation. The generated levels and games are all published on a website \footnote{http://www.amidos-games.com/puzzlescript-pcg/} to collect human feedbacks. The collected feedbacks is compared with the system scores. The following section analyzes the results of the new automated player and compares it with the original one, followed by showing results of the level generation techniques. The last section shows the results of the rule generation.\\\par

\section{Automated Player}
\secref{automatedPlayer} introduces new metric to solve the problem of having Player as one of the winning objects. Different weights were given to each one of the three metrics. The distance between winning objects metric is the most important metric if this metric equals to maximum then the level is solved. That is why other metrics have contributes with lower weights equals to 50\%. The distance between the player and the winning objects metric is weighted 50\% compared with the new metric. The reason behind that is at least one of the winning object is a rule object. New metric measures the distance between every two rule objects found in left hand side of any rule. This means one of the winning objects already contributing in the new metric. The following equation shows the final weights:
\begin{center}$d_{total} = d_{winning} + 0.5 * (d_{rules} + 0.5 * d_{player})$\end{center}
where $d_{winning}$ is the distance between winning objects metric, $d_{rules}$ is the distance between rule objects (new metric), and $d_{player}$ is the distance between the player and the winning objects.\\\par

The following section will describe the different games and levels used to test both automated players, followed by a comparison between their results.

\subsection{Input Description}\seclbl{gameDescription}
Forty handcrafted levels from five different games were used to test the different players. The five games are completely different to cover different object behaviors. Levels are also designed with different sizes and ideas to cover different design aspects. \figref{designedLevels} shows different levels from these games.

\gfigure{Examples for handcrafted levels from different games}{designedLevels}{width=5.5in}{Images/designedLevels}

The five games are Sokoban, LavaGame, BlockFaker, GemGame, and DestroyGame.
\begin{itemize} \itemsep0pt \parskip0pt \parsep0pt
	\item \textbf{Sokoban:} The goal of the game is to place every single crate over a certain position. Player can push crates to achieve that goal.
	\item \textbf{LavaGame:} The goal of the game is to reach the exit. Most of the time the path towards the exit is always blocked by a lava. Player should push crates over the lava to clear his way.
	\item \textbf{BlockFaker:} The goal of the game is to reach the exit. The path towards the exit is always blocked by lots of crates. Player should push these crates to align them vertically or horizontally. Every three aligned crates are destroyed which clear the path towards the exit.
	\item \textbf{GemGame:} The goal of the game is to place at least one gem over one of several locations. Player can create gems by pushing crates. Every three aligned crates are replaced with a single gem instead of the middle crate.
	\item \textbf{DestroyGame:} The goal of the game is to clear every single gem. Gems can be destroyed when they are aligned with two other crates vertically or horizontally. Player should push crates to reach that goal.
\end{itemize}

\subsection{Comparing Different Players}
Lim et al.\cite{puzzleScriptGeneration} automated player is compared with the new automated player. Both of them plays all the forty levels and reports the solution length and number of states explored. \figref{automatedPlayerPerformance} shows the average number of states each player explored in each game to reach the goal.

\gfigure{Comparison between the number of explored states for different automated players}{automatedPlayerPerformance}{width=6.0in}{Images/automatedPlayerPerformance}

The new player outperforms the original player in Sokoban and GemGame, but its almost the similar in the rest of the games. In games where the player is one of the winning objects, the new player just performed slightly better in BlockFaker, while LavaGame is slightly worse. The new players also performed badly in DestroyGame. The main reason behind the bad performance in these games is the presence of the Destroy behavior as the core mechanic of the game. For example, \figref{automatedPlayerProblem} have two crates and two lava, the metric measures the average distance between each crate and all lava. If the lower lava is destroyed first, the metric will be very long distance between crate and lava which is a little bit worse than before (only long distance is in consideration). Based on that, the player will explore more states that will not lead to the destroy of the lower lava.

\gfigure{LavaGame level cause the new player to do worse}{automatedPlayerProblem}{width=2.5in}{Images/automatedPlayerProblem}

Another drawback of the new metric is when levels have lots of unused objects. The new metric will make the player explores the unused objects aiming to reach the goal which increase the total number of explored states. This drawback is not so important as the main goal is to generate levels not to solve them. The presence of unused objects leads to an increase in the level difficulty.\\\par

\figref{automatedPlayerLength} shows the average solution length for each game for the different players. The new player produces slightly an overall shorter solutions than the original player. Comparing both \figref{automatedPlayerPerformance} and \figref{automatedPlayerLength} a correlation can be noticed between both of them except for Sokoban. Sokoban does not follow the same pattern due to being abstract with a very small amount of objects and just one rule. This abstraction is the main reason both players can reach the goal in almost the same amount of steps.

\gfigure{Comparison between the average solution length for different automated players}{automatedPlayerLength}{width=6.0in}{Images/automatedPlayerLength}

\tabref{playerCorrelation} shows the correlation value between the average solution length and the average explored states by the two players at the bottom. The values in the table is the difference between the original player and the new player. Positive values indicates the new player is better than the original and vice versa.

\begin{table}[!ht]
	\centering
	\begin{tabular}{|c|c|}
		\hline
		\textbf{The average solution length} & \textbf{The average explored states}\\
		\hline
		-0.875 & 11127.625\\
		\hline
		-1 & -3914\\
		\hline
		5 & 2736.625\\
		\hline
		12.875 & 16763.625\\
		\hline
		-4.75 & -6696.75\\
		\hline
		\textbf{Correlation} & 0.77127\\
		\hline
	\end{tabular}
	\caption{Correlation between the average explored states and the average solution length}
	\label{Table:playerCorrelation}
\end{table}

\section{Level Generation}
This section shows the results of different techniques introduced in \chref{Chapter4} for generating different levels. Automated player is used with fixed number of iteration. Automated player takes very long time to play the level. The automated player is limited to 5000 explored states to ensure fast execution and level quality.\\\par

The following section will discuss the required input data for the system to work, followed by the results for each of different approach used compared by human crafted levels. Each generated level is evaluated by the system and by human player. Correlation is calculated between the both results which is very low because of several reasons:
\begin{itemize} \itemsep0pt \parskip0pt \parsep0pt
	\item The automated player evaluate the potential of the level to be playable even if it is not unplayable which is not the case with human player. 
	\item Very challenging levels are rated high with the automated level, while low with human players.
	\item Small number of human player evaluations in certain games.
	\item There is no single definition for a good level.
\end{itemize}

\subsection{Input Description}
From \chref{Chapter4}, level generation needs a game description and some level layouts. Five different games were tested with eight different level layouts.

\subsubsection{Game Descriptions}
The five different games are the same games described in \secref{gameDescription}. Sticking with same games as they covers different behaviors and winning rules.
\begin{itemize}
	\item \textbf{Sokoban:} The game have four main objects (Player, Crate, Target, and Wall). Crate and Target are the winning objects with Crate having a Move behavior. Wall is a solid object. The game has an All winning rule.
	
	\item \textbf{LavaGame:} The game has five main objects (Player, Lava, Crate, Target, and Wall). Player and Target are the winning objects. Lava and Crate are normal rule objects with Destroy behavior. Crate has a Move behavior too. Wall is solid object. The game has an All winning rule.
	
	\item \textbf{BlockFaker:} The game has five main objects (Player, Crate, Stopper, Target, and Wall). Player and Target are the winning objects. Stopper and Crate are normal rule objects with Crate having Move and Destroy behaviors. Wall is solid object. The game has an All winning rule.
	
	\item \textbf{GemGame:} The game has five main objects (Player, Crate, Gem, Target, and Wall). Gem and Target are the winning objects with Gem having Create behavior. Crate is a critical rule object with Move and Destroy behaviors. Wall is a solid Object. The game has a Some winning rule.
	
	\item \textbf{DestroyGame:} The game has five main objects (Player, Crate, Gem, Target, and Wall). Gem and Target are the winning objects with Gem having Destroy behavior. Crate is a critical rule object with Move and Destroy behaviors. Wall is a solid object. The game has a No winning rule.
\end{itemize}

\subsubsection{Level Layouts}
The second input for the system is the level layouts. Eight different level layouts are used to generate levels. \figref{levelLayouts} shows these layouts. The layouts have different sizes and different internal structure to test the generator with different inputs. The biggest level layout is $8x8$ tiles because as the level size increase, the system takes longer time to generate a good level. The generation time is restricted so less interesting levels are generated. Human statistics proves this point in certain games.

\gfigure{Different level layouts for level generation}{levelLayouts}{width=5.5in}{Images/levelLayouts}

\subsection{Constructive Approach Results}
Hundred level is generated using Constructive Algorithm. These levels are evaluated and the best two levels are selected. This approach is repeated for the five different games and applied over the eight different layouts. The total amount of generated levels are 80 levels. \figref{constructiveExamples} shows examples of some of generated levels for different games. All the generated levels can be played online\footnote{http://www.amidos-games.com/puzzlescript-pcg/}.\\\par

\gfigure{Examples of the generated levels using constructive approach}{constructiveExamples}{width=5.5in}{Images/constructiveExamples}

Out of the 80 levels only 15\% are unplayable by the automated player but having a very high score. By testing these levels by human users only 10\% of these are completely unplayable while the rest 5\% are very challenging levels. \tabref{constructiveScores} shows the score for all the generated levels using the level evaluator and human evaluation.\\\par

There is a huge correlation between the generated scores and the human scores for Sokoban and BlockFaker games than any other games. The reason behind that is the automated player plays these games better than others using 5000 states (refer to \figref{automatedPlayerPerformance}). LavaGame has the most unplayable levels, because these unplayable games have high values in other heuristics compared with its playability score. GemGame and DestroyGame have a very small correlation because they are very hard games so the automated player always prefer the easy levels than hard ones. The reason behind that is the playability metric has huge effect on the final score as Do Nothing Score is always zero which is not the case with LavaGame and BlockFaker.

\begin{landscape}
\begin{table}[!ht]
	\centering
	\begin{tabular}{|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|}
		\hline
		\multicolumn{2}{c}{\textbf{Sokoban}} & \multicolumn{2}{c}{\textbf{LavaGame}} & \multicolumn{2}{c}{\textbf{\textbf{BlockFaker}}} & \multicolumn{2}{c}{\textbf{GemGame}} & \multicolumn{2}{c}{\textbf{DestroyGame}}\\
		\hline
		\textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player}\\
		\hline
		0.616362 & 0.6 & 0.62840621 & 0 & 0.67445767 & 0.533333333 & 0.770599632 & 0.8 & 0.8232172 & 0.8\\
		\hline
		0.616362 & 0.6 & 0.5876679 & 0.533333333 & 0.6232392 & 0.533333333 & 0.770599 & 0.8 & 0.8232172 & 0.8\\
		\hline
		0.69734 & 0.768421053 & 0.5896824 & 0 & 0.65679029 & 0.533333333 & 0.9577728 & 0.8 & 0.9098534 & 0.8\\
		\hline
		0.694114 & 0.705263158 & 0.5821967 & 0.6 & 0.650513102 & 0.533333333 & 0.95777289 & 0.8 & 0.9095344 & 0.8\\
		\hline
		0.685905 & 0.811111111 & 0.62574735 & 0.466666667 & 0.60716514 & 0.6 & 0.96990456 & 0.6 & 0.914115 & 0.8\\
		\hline
		0.671965 & 0.8125 & 0.61386285 & 0.6 & 0.59945915 & 0.733333333 & 0.95356176 & 0.8 & 0.8975684 & 0.8\\
		\hline
		0.68588 & 0.677777778 & 0.6865308 & 0.6 & 0.743085297 & 0.666666667 & 0.85842389 & 0.6 & 0.9479144 & 0.6\\
		\hline
		0.67818 & 0.711111111 & 0.662806064 & 0.6 & 0.712869944 & 0.733333333 & 0.8531832 & 0.6 & 0.9418275 & 0.6\\
		\hline
		0.676906 & 0.694736842 & 0.7116651 & 0.533333333 & 0.750199824 & 0.866666667 & 0.91531076 & 0.6 & 0.9259153 & 0.6\\
		\hline
		0.6724738 & 0.705263158 & 0.6679423 & 0 & 0.74666923 & 0.8 & 0.8580357 & 0.6 & 0.9144401 & 0.8\\
		\hline
		0.70278 & 0.688888889 & 0.651134564 & 0.666666667 & 0.6585878 & 0 & 0.87784682 & 0.4 & 0.935399 & 0.6\\
		\hline
		0.698841 & 0.866666667 & 0.63963322 & 0 & 0.6572663 & 0.733333333 & 0.8774374 & 0.6 & 0.9293 & 0.6\\
		\hline
		0.659504 & 0.633333333 & 0.77533756 & 0.9 & 0.783839585 & 0.8 & 0.9196736 & 0.8 & 0.947915 & 0.6\\
		\hline
		0.6530206 & 0.705882353 & 0.67766235 & 0.6 & 0.7277456 & 0.8 & 0.8669255 & 0.8 & 0.9369172 & 0.8\\
		\hline
		0.681864 & 0.788888889 & 0.69552052 & 0 & 0.7283029 & 0.733333333 & 0.91133042 & 0.6 & 0.9449218 & 0.6\\
		\hline
		0.671696 & 0.766666667 & 0.667115002 & 0 & 0.7209062 & 0 & 0.89999055 & 0.8 & 0.93881904 & 0.8\\
		\hline
		\textbf{Correlation} & 0.6634913 & \textbf{Correlation} & 0.2545798 & \textbf{Correlation} & 0.2734119 & \textbf{Correlation} & -0.0026173 & \textbf{Correlation} & -0.560329\\
		\hline
	\end{tabular}
	\caption{Automated Scores vs Human Scores for constructive approach}
	\label{Table:constructiveScores}
\end{table}
\end{landscape}

The constructive technique is a very fast technique that can be used for level generation in real time depending on the time of the automated player used. Although the algorithm ensures high level playability, it limits the search space for potential levels producing similar generated levels. The search space is limited due to the following:
\begin{itemize} \itemsep0pt \parskip0pt \parsep0pt
	\item The number of objects are always limited by the size of the free areas in the map. That's why the two generated levels always have same number of objects.
	\item The moving object should be placed at the most free place. That's why the moving objects are always placed at certain places in a certain order.
	\item The second winning object is always at the farthest distance from the first object. That's why the second winning object is always aligned with level borders refer to \figref{constructiveExamples}.
\end{itemize}

Smaller levels are subjected to higher similarity that bigger size levels. Out of the 80 levels only 8.75\% are the same and all of them happens in the first three layouts specially the first level.

\subsection{Genetic Approach Results}
Genetic approach is used to give the system the ability to modify the generated levels to improve the playability and variety of games. Genetic algorithm is used for 20 generations with population of size 50. The crossover rate is around 70\% and mutation rate is around 10\%. The best two chromosomes of each level layout is published.\\\par

The maximum fitness of the GA is presented in \figref{gaWithoutElitism}. Its clear that the best chromosomes disappear after few generations because they have really near fitness. The changes are not so huge but to ensure having best chromosome Elitism is used with probability equals 2\%.

\gfigure{Maximum fitness for GA without Elitism}{gaWithoutElitism}{width=6.0in}{Images/gaWithoutElitism}

The drawback of using elitism that in most of the time the second best chromosome is the same as the best one which creates lots of redundant levels.\\\par

\subsubsection{Random Initialization}
Different initialization methods are tested alone and against each other. The first method is Random Initialization described in \secref{geneticApproach}. \figref{randomMaxFitness} and \figref{randomAverageFitness} shows the evolution of maximum and average fitness respectively. Sokoban is the best evolved game in all of them. That's due to the small amount of objects needed to have a playable level, while GemGame requires pretty tough behavior to be playable that is why it take very long time to evolve. Although DestroyGame have a higher score than Sokoban but it has less quality. The DestroyGame has a zero Do Nothing score, while Sokoban always has a high Do Nothing score (refer to \tabref{constructiveScores}).

\gfigure{Maximum fitness for GA with random initialization}{randomMaxFitness}{width=6.0in}{Images/randomMaxFitness}

\gfigure{Average fitness for GA with random initialization}{randomAverageFitness}{width=6.0in}{Images/randomAverageFitness}

\gfigure{Examples of the generated levels using GA with random initialization}{randomExamples}{width=5.5in}{Images/randomExamples}

\figref{randomExamples} shows a group some of the different levels using GA with random initialization. These levels are subjected to human players to test the playability and quality of each generated level. About 42.5\% of the generated levels are repeated levels and 75\% of them are playable although the automated player reported 73.75\% unplayable levels. \tabref{randomScores} shows the correlation between the automated score and human scores. Most of the unplayable levels are found in the GemGame and DestroyGame, while most playable levels are LavaGame and BlockFaker. The reason behind that is that winning condition for BlockFaker and LavaGame is more easier than GemGame and DestroyGame as they required a certain number of objects to finish it.\\\par

The correlation is the highest at GemGame and DestroyGame because most of the generated levels are unplayable and their best state is the starting state. That is different from unplayable levels in constructive approach where it gets a higher score which indicates the percentage of level playability. The problem with Random Initialization that it needs very huge amount of generation to converge to a playable challenging levels.

\begin{landscape}
\begin{table}[!ht]
	\centering
	\begin{tabular}{|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|}
		\hline
		\multicolumn{2}{c}{\textbf{Sokoban}} & \multicolumn{2}{c}{\textbf{LavaGame}} & \multicolumn{2}{c}{\textbf{\textbf{BlockFaker}}} & \multicolumn{2}{c}{\textbf{GemGame}} & \multicolumn{2}{c}{\textbf{DestroyGame}}\\
		\hline
		\textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player}\\
		\hline
		0.472927827 & 0.566666667 & 0.55654906 & 0.9 & 0.56366794 & 0.4 & 0.2895113 & 0 & 0.823277724 & 0.7\\
		\hline
		0.472927827 & 0.566666667 & 0.55654906 & 0.9 & 0.56366794 & 0.4 & 0.2895113 & 0 & 0.823277724 & 0.7\\
		\hline
		0.66605524 & 0.630769231 & 0.4829044 & 0.4 & 0.58819125 & 0.4 & 0.2852678 & 0 & 0.285267846 & 0\\
		\hline
		0.66605524 & 0.630769231 & 0.4829044 & 0.4 & 0.58819125 & 0.4 & 0.2852678 & 0 & 0.285267846 & 0\\
		\hline
		0.620078 & 0.892307692 & 0.58316514 & 0.5 & 0.539436756 & 0.4 & 0.284260212 & 0 & 0.296260212 & 0\\
		\hline
		0.601255799 & 0.892307692 & 0.58316514 & 0.5 & 0.539436756 & 0.4 & 0.284260212 & 0 & 0.296260212 & 0\\
		\hline
		0.57708091 & 0.516666667 & 0.55400489 & 0.4 & 0.50191485 & 0.4 & 0.3350501 & 0 & 0.75341078 & 0.4\\
		\hline
		0.57708091 & 0.516666667 & 0.55400489 & 0.4 & 0.50191485 & 0.4 & 0.3350501 & 0 & 0.75341078 & 0.4\\
		\hline
		0.5720216 & 0 & 0.4216133 & 0.4 & 0.523848613 & 0.4 & 0.346181665 & 0 & 0.87578933 & 0.6\\
		\hline
		0.5720216 & 0 & 0.4216133 & 0.4 & 0.46675503 & 0.4 & 0.33422192 & 0 & 0.87108038 & 0.4\\
		\hline
		0.604114365 & 0.44 & 0.57729139 & 0.6 & 0.50550698 & 0.5 & 0.282968 & 0 & 0.865837091 & 0.6\\
		\hline
		0.604114365 & 0.44 & 0.57729139 & 0.6 & 0.50550698 & 0.5 & 0.282968 & 0 & 0.858546414 & 0.6\\
		\hline
		0.638117335 & 0.633333333 & 0.569474277 & 1 & 0.46041324 & 0.4 & 0.8438745 & 0 & 0.934646319 & 0.6\\
		\hline
		0.638117336 & 0.633333333 & 0.569474277 & 1 & 0.46041324 & 0.4 & 0.8438745 & 0.4 & 0.934646319 & 0.6\\
		\hline
		0.620584613 & 0.771428571 & 0.5843821 & 1 & 0.54673306 & 0.4 & 0.90855179 & 0.8 & 0.84207603 & 0.8\\
		\hline
		0.620584613 & 0.771428571 & 0.5843821 & 1 & 0.53355297 & 0.8 & 0.90855179 & 0.6 & 0.52655178 & 0\\
		\hline
		\textbf{Correlation} & 0.281768023 & \textbf{Correlation} & 0.557156502 & \textbf{Correlation} & -0.0011142 & \textbf{Correlation} & 0.824985501 & \textbf{Correlation} & 0.916474873\\
		\hline
	\end{tabular}
	\caption{Automated Scores vs Human Scores for GA with random initialization}
	\label{Table:randomScores}
\end{table}
\end{landscape}

\subsubsection{Constructive Initialization}
Using constructive algorithm to initialize the GA ensures better playability as 90\% of the generated level output is playable levels. GA will ensure the increase of that playability to reach 100\% and it expands the search space finding more diverse results than Constructive Approach only. \figref{gaConstructiveMax} and \figref{gaConstructiveAverage} show the evolution of max fitness and average fitness across the generations. The slow increase in the max fitness score is due to two reasons:
\begin{itemize} \itemsep0pt \parskip0pt \parsep0pt
	\item The high quality of the generated levels by the constructive algorithm.
	\item The limited search space of the constructive algorithm.
\end{itemize}
The second point is the main reason why the average score drops at the beginning. At the beginning, GA expands the search space using the Mutation operators to find different levels. Crossover has a little bit effect as all the levels have same formate of the constructive algorithm. The same reasons above makes the generated levels very similar to the constructive algorithm output. For examples, Sokoban levels have crates set at the most empty spaces, ending targets on the borders, and ...etc. Even the unplayable levels seems like an alternated versions of the constructive algorithm levels.\\\par

\gfigure{Maximum fitness for GA with constructive initialization}{gaConstructiveMax}{width=6.0in}{Images/gaConstructiveMax}

\gfigure{Average fitness for GA with constructive initialization}{gaConstructiveAverage}{width=6.0in}{Images/gaConstructiveAverage}

\figref{constructiveGAExamples} shows some generated levels. 46.25\% of the generated levels are similar due elitism and small search space. All the levels generated are playable. \tabref{constructiveGAScores} shows the automated player score with human scores and calculates the correlation between both of them. Same small correlation happens in the DestroyGame and GemGame due to its difficulty. The generated games are 100\% playable but most of them still have same structure of The constructive algorithm.

\gfigure{Examples of the generated levels using GA with constructive initialization}{constructiveGAExamples}{width=5.5in}{Images/constructiveGAExamples}

\begin{landscape}
\begin{table}[!ht]
	\centering
	\begin{tabular}{|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|}
		\hline
		\multicolumn{2}{c}{\textbf{Sokoban}} & \multicolumn{2}{c}{\textbf{LavaGame}} & \multicolumn{2}{c}{\textbf{\textbf{BlockFaker}}} & \multicolumn{2}{c}{\textbf{GemGame}} & \multicolumn{2}{c}{\textbf{DestroyGame}}\\
		\hline
		\textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player}\\
		\hline
		0.616362 & 0.6 & 0.6191616 & 0.5 & 0.674457 & 0.6 & 0.8730908 & 0.8 & 0.8769583 & 0.8\\
		\hline
		0.615881 & 0.52 & 0.6191616 & 0.5 & 0.674457 & 0.6 & 0.8730908 & 0.8 & 0.8769583 & 0.8\\
		\hline
		0.71161371 & 0.766666667 & 0.6521912 & 0.6 & 0.640292 & 0.6 & 0.957772 & 0.8 & 0.927642 & 0.6\\
		\hline
		0.71161371 & 0.766666667 & 0.6121912 & 0.6 & 0.640292 & 0.6 & 0.957772 & 0.8 & 0.927642 & 0.6\\
		\hline
		0.6813152 & 0.6 & 0.6261598 & 0.8 & 0.613533 & 0.6 & 0.9541082 & 0.6 & 0.9201257 & 0.8\\
		\hline
		0.6813152 & 0.6 & 0.6260663 & 0.6 & 0.60379 & 0.6 & 0.9541082 & 0.6 & 0.9201257 & 0.8\\
		\hline
		0.692882 & 0.88 & 0.650007 & 0.7 & 0.75497 & 0.8 & 0.92124517 & 0.6 & 0.94662662 & 0.6\\
		\hline
		0.692882 & 0.88 & 0.650007 & 0.7 & 0.75497 & 0.8 & 0.92124517 & 0.6 & 0.94332112 & 0.6\\
		\hline
		0.690599 & 0.6 & 0.765587 & 0.9 & 0.80884 & 0.8 & 0.9003137 & 0.6 & 0.928826 & 0.8\\
		\hline
		0.690599 & 0.6 & 0.765587 & 0.9 & 0.80884 & 0.8 & 0.9003137 & 0.6 & 0.928826 & 0.8\\
		\hline
		0.702111 & 0.666666667 & 0.80019 & 0.7 & 0.827012 & 0.9 & 0.9340367 & 0.8 & 0.9418921 & 0.6\\
		\hline
		0.69881 & 0.666666667 & 0.80019 & 0.7 & 0.827012 & 0.9 & 0.9340367 & 0.8 & 0.9418921 & 0.6\\
		\hline
		0.672561 & 0.766666667 & 0.7755379 & 0.6 & 0.810844 & 0.8 & 0.9438273 & 0.6 & 0.93639401 & 0.8\\
		\hline
		0.672561 & 0.766666667 & 0.7755379 & 0.6 & 0.766883 & 0.8 & 0.9438273 & 0.6 & 0.93639401 & 0.8\\
		\hline
		0.703393 & 0.733333333 & 0.697292 & 0.6 & 0.817545 & 0.8 & 0.923987 & 0.6 & 0.9321509 & 0.8\\
		\hline
		0.703393 & 0.733333333 & 0.697292 & 0.6 & 0.817545 & 0.8 & 0.923987 & 0.6 & 0.9321509 & 0.8\\
		\hline
		\textbf{Correlation} & 0.515628369 & \textbf{Correlation} & 0.42035216 & \textbf{Correlation} & 0.941391762 & \textbf{Correlation} & -0.128466 & \textbf{Correlation} & -0.465830\\
		\hline
	\end{tabular}
	\caption{Automated Scores vs Human Scores for GA with constructive initialization}
	\label{Table:constructiveGAScores}
\end{table}
\end{landscape}

\subsubsection{Mixed Initialization}
To ensure more diversity, Mixed initialization is used. 25\% of population is initialized using constructive algorithm, another 25\% with mutated versions of levels from constructive algorithm, while the rest are mutated versions of level layouts. The mutated levels are the result of subjecting each level to mutation for twenty times.\\\par 

\figref{gaMixedMax} and \figref{gaMixedAverage} shows the evolution of fitness across generations. The average fitness increases along the generation, while max fitness increases very slowly. Games with high likely to be unplayable in constructive algorithm such as LavaGame have the best rate.

\gfigure{Maximum fitness for GA with mixed initialization}{gaMixedMax}{width=6.0in}{Images/gaMixedMax}

\gfigure{Average fitness for GA with mixed initialization}{gaMixedAverage}{width=6.0in}{Images/gaMixedAverage}

\figref{mixedExamples} shows different generated levels using mixed initialization. All generated levels are playable with 42.5\% repeated levels. \tabref{mixedGAScores} shows different evaluation scores for different by the system and human players.

\gfigure{Examples of the generated levels using GA with mixed initialization}{mixedExamples}{width=5.5in}{Images/mixedExamples}

\begin{landscape}
\begin{table}[!ht]
	\centering
	\begin{tabular}{|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|p{0.8in}|}
		\hline
		\multicolumn{2}{c}{\textbf{Sokoban}} & \multicolumn{2}{c}{\textbf{LavaGame}} & \multicolumn{2}{c}{\textbf{\textbf{BlockFaker}}} & \multicolumn{2}{c}{\textbf{GemGame}} & \multicolumn{2}{c}{\textbf{DestroyGame}}\\
		\hline
		\textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player} & \textbf{Automated Player} & \textbf{Human Player}\\
		\hline
		0.654089218 & 0.7 & 0.5989727 & 0.7 & 0.5658553 & 0.6 & 0.82325022 & 0.8 & 0.680589 & 0.4\\
		\hline
		0.654089218 & 0.7 & 0.5989727 & 0.7 & 0.5658553 & 0.6 & 0.82325022 & 0.8 & 0.680589 & 0.4\\
		\hline
		0.64291055 & 0.644444444 & 0.5544389 & 0.8 & 0.6580676 & 0.6 & 0.9621 & 0.8 & 0.9132655 & 0.8\\
		\hline
		0.64291055 & 0.64444444 & 0.5544389 & 0.8 & 0.6580676 & 0.6 & 0.9621 & 0.8 & 0.9132655 & 0.8\\
		\hline
		0.68702434 & 0.533333333 & 0.5526414 & 0.7 & 0.62174446 & 0.6 & 0.9430214 & 0.8 & 0.9396707 & 0.8\\
		\hline
		0.68702434 & 0.533333333 & 0.5526414 & 0.7 & 0.62174446 & 0.6 & 0.9430214 & 0.8 & 0.9390626 & 0.8\\
		\hline
		0.68636698 & 0.555555556 & 0.6992303 & 0.4 & 0.68210815 & 0.7 & 0.8828038 & 0.6 & 0.933516 & 0.6\\
		\hline
		0.6863669 & 0.555555556 & 0.6992303 & 0.4 & 0.68210815 & 0.7 & 0.8824508 & 0.6 & 0.933516 & 0.6\\
		\hline
		0.6894032 & 0.666666667 & 0.718745 & 0.8 & 0.7304408 & 0.8 & 0.924357 & 0.8 & 0.9286588 & 0.4\\
		\hline
		0.6894032 & 0.666666667 & 0.718745 & 0.8 & 0.7304408 & 0.8 & 0.924357 & 0.8 & 0.9286588 & 0.4\\
		\hline
		0.6994754 & 0.688888889 & 0.654869 & 0.7 & 0.7425093 & 0.9 & 0.931827 & 0.8 & 0.933017 & 1\\
		\hline
		0.6994754 & 0.688888889 & 0.654869 & 0.7 & 0.7425093 & 0.9 & 0.931827 & 0.8 & 0.933017 & 1\\
		\hline
		0.67699273 & 0.666666667 & 0.7309346 & 0.6 & 0.65543165 & 0.8 & 0.950839 & 0.6 & 0.9321156 & 0.8\\
		\hline
		0.67699273 & 0.666666667 & 0.7309346 & 0.6 & 0.65543165 & 0.8 & 0.950839 & 0.6 & 0.9321156 & 0.8\\
		\hline
		0.65561072 & 0.755555556 & 0.7776904 & 1 & 0.745198 & 0.8 & 0.93151312 & 0.8 & 0.9451245 & 0.6\\
		\hline
		0.65561072 & 0.755555556 & 0.7586242 & 1 & 0.745198 & 0.8 & 0.93151312 & 0.8 & 0.9451245 & 0.6\\
		\hline
		\textbf{Correlation} & -0.393092 & \textbf{Correlation} & 0.088979799 & \textbf{Correlation} & 0.814104796 & \textbf{Correlation} & 0.026758801 & \textbf{Correlation} &0.511263461\\
		\hline
	\end{tabular}
	\caption{Automated Scores vs Human Scores for GA with mixed initialization}
	\label{Table:mixedGAScores}
\end{table}
\end{landscape}

\subsection{Different Techniques Comparison}
All the previous score table are combined and a general correlation is calculated for each game. Sokoban and BlockFaker have a very good correlation which can be seen in \figref{sokobanCorrelation} and \figref{blockFakerCorrelation}.

\gfigure{Correlation between all automated player score and human scores for Sokoban}{sokobanCorrelation}{width=5.5in}{Images/sokobanCorrelation}

\gfigure{Correlation between all automated player score and human scores for BlockFaker}{blockFakerCorrelation}{width=5.5in}{Images/blockFakerCorrelation}

GemGame and DestroyGame  have also a high correlation but since the collected data is very small so \figref{gemGameCorrelation} and \figref{destroyGameCorrelation} looks more flat.

\gfigure{Correlation between all automated player score and human scores for GemGame}{gemGameCorrelation}{width=5.5in}{Images/gemGameCorrelation}

\gfigure{Correlation between all automated player score and human scores for DestroyGame}{destroyGameCorrelation}{width=5.5in}{Images/destroyGameCorrelation}

LavaGame has a very small correlation in \figref{lavaGameCorrelation} because of the bad performance of the automated player. The high value levels are just some playable levels and not challenging because challenging levels in LavaGame are very hard to be solved by the automated player.

\gfigure{Correlation between all automated player score and human scores for LavaGame}{lavaGameCorrelation}{width=5.5in}{Images/lavaGameCorrelation}

The following figures shows comparison between different techniques to generate automated levels. GA with constructive initialization have the highest score in almost all games specially in \figref{blockFakerComparison}, followed by GA with mixed initialization where its nearly similar and sometimes better in some levels like in \figref{lavaGameComparison}. The worst of them all is the GA with random initialization where it was predicted as the technique need more time to find good playable levels. The worst scores were in \figref{gemGameComparison} and \figref{destroyGameComparison} due to the difficulty of rules to reach winning condition. Constructive algorithm technique is always better than GA with random initialization but rarely outperform the other types of initializations like in \figref{destroyGameComparison} due to the fact GA used constructive algorithm as initial seed to find better levels. Sokoban scores in \figref{sokobanComparison} are almost similar even the random initialization has a nearly high score due to the fact the small number of objects needed to have a playable level.

\gfigure{Max fitness of all proposed techniques for Sokoban}{sokobanComparison}{width=6.0in}{Images/sokobanComparison}

\gfigure{Max fitness of all proposed techniques for LavaGame}{lavaGameComparison}{width=6.0in}{Images/lavaGameComparison}

\gfigure{Max fitness of all proposed techniques for BlockFaker}{blockFakerComparison}{width=6.0in}{Images/blockFakerComparison}

\gfigure{Max fitness of all proposed techniques for GemGame}{gemGameComparison}{width=6.0in}{Images/gemGameComparison}

\gfigure{Max fitness of all proposed techniques for DestroyGame}{destroyGameComparison}{width=6.0in}{Images/destroyGameComparison}

From the previous figures its clear that Constructive Algorithm always generate a very high level quality levels regardless of the input rules. That point is the main reason behind using constructive algorithm to generate levels in Rule Generation beside being a fast generation technique.

\section{Rule Generation}
to be written.
